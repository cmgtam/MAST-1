<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>8.4. The Ingredients section &#8212; MAST 1.3.2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8.5. The Recipe section" href="3_1_3_recipe.html" />
    <link rel="prev" title="8.3. The Scaling section" href="3_1_9_scaling.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="3_1_3_recipe.html" title="8.5. The Recipe section"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="3_1_9_scaling.html" title="8.3. The Scaling section"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MAST 1.3.2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="3_1_inputsections.html" accesskey="U">8. Sections of the Input File</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-ingredients-section">
<h1>8.4. The Ingredients section<a class="headerlink" href="#the-ingredients-section" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">$ingredients</span></code> section contains a section for global ingredient keywords and then a section for each <strong>ingredient type</strong>.</p>
<p>Each ingredient type in the recipe should have a subsection denoted by <code class="docutils literal"><span class="pre">begin</span> <span class="pre">&lt;ingredient</span> <span class="pre">type&gt;</span></code>.</p>
<p>Example <code class="docutils literal"><span class="pre">$ingredients</span></code> section:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ingredients

begin ingredients_global
keyword1 k1value1
end

begin ingredient_type1
keyword1 k1value2
keyword2 k2value1
end

begin ingredient_type2
keyword2 k2value2
end

$end
</pre></div>
</div>
<p>Program-specific keywords such as VASP INCAR keywords are included in these sections. All other keywords are prefaced with <code class="docutils literal"><span class="pre">mast_</span></code>.</p>
<p>If there are no changes from the ingredients_global section, just add an empty subsection for that ingredient type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">begin</span> <span class="n">ingredient_type</span>
<span class="n">end</span>
</pre></div>
</div>
<p>For a specific ingredient type, if a keyword is not specified in that ingredient type&#8217;s subsection but is specified in the <strong>ingredients_global</strong> subsection, then, the value for that keyword will be taken from ingredients_global.</p>
<ul class="simple">
<li>In the example above, <code class="docutils literal"><span class="pre">ingredient_type2</span></code> would inherit <code class="docutils literal"><span class="pre">keyword1</span> <span class="pre">k1value1</span></code> from ingredients_global.</li>
</ul>
<div class="section" id="program-specific-keywords">
<h2>8.4.1. Program-specific keywords<a class="headerlink" href="#program-specific-keywords" title="Permalink to this headline">¶</a></h2>
<p>VASP keywords such as <code class="docutils literal"><span class="pre">IBRION</span></code>, <code class="docutils literal"><span class="pre">ISIF</span></code>, <code class="docutils literal"><span class="pre">LCHARG</span></code>, <code class="docutils literal"><span class="pre">LWAVE</span></code>, and so on, can be specified under each ingredient type in the <code class="docutils literal"><span class="pre">$ingredients</span></code> section of the input file.</p>
<p>Such program-specific keywords are only allowed if they are listed in the program-specific file located in the <code class="docutils literal"><span class="pre">&lt;MAST</span> <span class="pre">installation</span> <span class="pre">directory&gt;/MAST/ingredients/programkeys/</span></code> folder, for example, <code class="docutils literal"><span class="pre">&lt;MAST</span> <span class="pre">installation</span> <span class="pre">directory&gt;/MAST/ingredients/programkeys/vasp_allowed_keywords.py</span></code>.</p>
<p>These program-specific keywords will be turned into uppercase keywords. The values will not change case, and should be given in the case required by the program. For example, <code class="docutils literal"><span class="pre">lwave</span> <span class="pre">False</span></code> will be translated into <code class="docutils literal"><span class="pre">LWAVE</span> <span class="pre">False</span></code> in the VASP INCAR file.</p>
<p>One exception for VASP keywords is the <code class="docutils literal"><span class="pre">IMAGES</span></code> keyword, which signals a nudged elastic band run, and should instead be set in the <code class="docutils literal"><span class="pre">$neb</span></code> section of the input file.</p>
<p>For VASP ingredients, please include</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">lcharg</span> <span class="kc">False</span>
<span class="n">lwave</span> <span class="kc">False</span>
</pre></div>
</div>
<p>in your ingredient global keywords in order to avoid writing the large VASP files CHGCAR and WAVECAR, unless you really need these files.</p>
</div>
<div class="section" id="special-mast-keywords">
<h2>8.4.2. Special MAST keywords<a class="headerlink" href="#special-mast-keywords" title="Permalink to this headline">¶</a></h2>
<p>Any keyword that starts with <code class="docutils literal"><span class="pre">mast_</span></code> is considered a special keyword utilized by MAST and will not be written into the VASP INCAR file or any custom input file.</p>
<div class="section" id="submission-script-keywords">
<h3>8.4.2.1. Submission script keywords<a class="headerlink" href="#submission-script-keywords" title="Permalink to this headline">¶</a></h3>
<p>The following queue submission keywords are platform-dependent and are used along to create the submission script (see <a class="reference internal" href="1_0_installation.html"><span class="doc">Installation</span></a>).</p>
<p><strong>mast_exec</strong>: The command used in the submission script to execute the program. Note that this is a specific command rather than the class of program, given in <code class="docutils literal"><span class="pre">mast_program</span></code>, and it should include any MPI commands.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_exec</span> <span class="o">//</span><span class="n">opt</span><span class="o">/</span><span class="n">mpiexec</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">mpiexec</span> <span class="o">~/</span><span class="nb">bin</span><span class="o">/</span><span class="n">vasp_5</span><span class="o">.</span><span class="mi">2</span>
</pre></div>
</div>
<p><strong>mast_nodes</strong>: The number of nodes requested.</p>
<p><strong>mast_ppn</strong>: The number of processors per node requested.</p>
<p><strong>mast_queue</strong>: The queue requested.</p>
<p><strong>mast_walltime</strong>: The walltime requested, in whole number of hours</p>
<p><strong>mast_memory</strong>: The memory per processor requested.</p>
</div>
<div class="section" id="mast-control-flow-keywords">
<h3>8.4.2.2. MAST control flow keywords<a class="headerlink" href="#mast-control-flow-keywords" title="Permalink to this headline">¶</a></h3>
<p><strong>mast_program</strong>: Specify which program to run (<code class="docutils literal"><span class="pre">vasp</span></code>, <code class="docutils literal"><span class="pre">vasp_neb</span></code>, or <code class="docutils literal"><span class="pre">None</span></code> for a generic program, are currently supported)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_program</span> <span class="n">vasp</span>
</pre></div>
</div>
<ul class="simple">
<li>This keyword must be in lowercase</li>
</ul>
<p><strong>mast_frozen_seconds</strong>: A number of seconds before a job is considered frozen, if its output file has not been updated within this amount of time. If not set, 21000 seconds is used.</p>
<p><strong>mast_auto_correct</strong>: Specify whether mast should automatically correct errors.</p>
<ul class="simple">
<li>The default is True, so if this keyword is set to True, or if this keyword is not specified at all, then MAST will attempt to find errors, automatically correct the errors, and resubmit the ingredient.</li>
<li>If set to False, MAST will attempt to find errors, then write them into a <code class="docutils literal"><span class="pre">MAST_ERROR</span></code> file in the recipe folder, logging both the error-containing ingredient and the nature of the error, but not taking any corrective actions. The recipe will be skipped in all subsequent MAST runs until the <code class="docutils literal"><span class="pre">MAST_ERROR</span></code> file is manually deleted by the user.</li>
</ul>
</div>
<div class="section" id="vasp-specific-keywords">
<h3>8.4.2.3. VASP-specific keywords<a class="headerlink" href="#vasp-specific-keywords" title="Permalink to this headline">¶</a></h3>
<p><strong>mast_kpoints</strong>: Specify k-point instructions in the form of kpoints along lattice vectors a, b, and c, and then a designation M for Monkhorst-Pack or G for Gamma-centered.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_kpoints</span> <span class="o">=</span> <span class="mi">3</span><span class="n">x3x3</span> <span class="n">G</span>
</pre></div>
</div>
<ul class="simple">
<li>Either this keyword or <code class="docutils literal"><span class="pre">mast_kpoint_density</span></code> is required for VASP calculations.</li>
</ul>
<p><strong>mast_kpoint_density</strong>: A number for the desired kpoint mesh density.</p>
<ul class="simple">
<li>Only works with <code class="docutils literal"><span class="pre">mast_write_method</span></code> of <code class="docutils literal"><span class="pre">write_singlerun_automesh</span></code></li>
<li>Either this keyword or <code class="docutils literal"><span class="pre">mast_kpoints</span></code> is required for VASP calculations.</li>
</ul>
<p><strong>mast_pp_setup</strong>: Specify which pseudopotential goes to which element:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_pp_setup</span> <span class="n">La</span><span class="o">=</span><span class="n">La</span> <span class="n">Mn</span><span class="o">=</span><span class="n">Mn_pv</span> <span class="n">O</span><span class="o">=</span><span class="n">O_s</span>
</pre></div>
</div>
<p><strong>mast_xc</strong>: Specify an exchange correlation functional; for VASP, follow the conventions of pymatgen (e.g. pw91, pbe)</p>
<ul class="simple">
<li>This keyword is required for VASP calculations.</li>
</ul>
<p><strong>mast_multiplyencut</strong>: Specify a number with which to multiply the maximum ENCUT value of the pseudopotentials. Volume relaxations in VASP often take 1.5; otherwise 1.25 is sufficient.</p>
<ul class="simple">
<li>Default is 1.5</li>
<li>If <code class="docutils literal"><span class="pre">encut</span></code> is given as a program keyword, then that value will be used and <code class="docutils literal"><span class="pre">mast_multiplyencut</span></code> should have no effect</li>
</ul>
<p><strong>mast_setmagmom</strong>: Specify a string to use for setting the initial magnetic moment. A short string will result in multipliers. For example, <code class="docutils literal"><span class="pre">mast_setmagmom</span> <span class="pre">1</span> <span class="pre">5</span> <span class="pre">1</span></code> will produce <code class="docutils literal"><span class="pre">2*1</span> <span class="pre">2*5</span> <span class="pre">8*1</span></code> for a 12-atom unit cell with 2A, 2B, and 8C atoms. A string of the number of atoms in the <code class="docutils literal"><span class="pre">POSCAR</span></code> file will be printed as entered, for example, <code class="docutils literal"><span class="pre">mast_setmagmom</span> <span class="pre">1</span> <span class="pre">-1</span> <span class="pre">1</span> <span class="pre">-1</span> <span class="pre">1</span> <span class="pre">-1</span> <span class="pre">1</span> <span class="pre">-1</span></code>.</p>
<p><strong>mast_charge</strong>: Specify the charge on the system (total system)</p>
<ul class="simple">
<li>-1 charge means the ADDITION of one electron. For example, O2- has two more electrons than O neutral.</li>
<li>A positive charge is the REMOVAL of electrons. For example, Na+ with a +1 charge has one FEWER electron than Na neutral.</li>
</ul>
<p><strong>mast_coordinates</strong>: For a non-NEB calculation, allows you to specify a single POSCAR-type of CIF structure file which corresponds to the relaxed fractional coordinates at which you would like to start this ingredient. ONLY the coordinates are used. The lattice parameters and elements are given by the $structure section of the input file. The coordinates must be fractional coordinates.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_coordinates</span> <span class="n">POSCAR_initialize</span>
</pre></div>
</div>
<ul>
<li><p class="first">For an NEB calculation, use a comma-delimited list of poscar files corresponding to the correct number of images. Put no spaces between the file names. Example for an NEB with 3 intermediate images:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_coordinates</span> <span class="n">POSCAR_im1</span><span class="p">,</span><span class="n">POSCAR_im2</span><span class="p">,</span><span class="n">POSCAR_im3</span>
</pre></div>
</div>
</li>
<li><p class="first">The structure files must be found in the directory from which the input file is being submitted when initially inputting the input file (e.g. the directory you are in when you run <code class="docutils literal"><span class="pre">mast</span> <span class="pre">-i</span> <span class="pre">test.inp</span></code>); once the <code class="docutils literal"><span class="pre">input.inp</span></code> file is created in the recipe directory, it will store a full path back to these poscar-type files.</p>
</li>
<li><p class="first">This keyword cannot be used with programs other than VASP, cartesian coordinates, and special ingredients like inducedefect-type ingredients, whose write or run methods are different.</p>
</li>
</ul>
</div>
<div class="section" id="structure-manipulation-keywords">
<h3>8.4.2.4. Structure manipulation keywords<a class="headerlink" href="#structure-manipulation-keywords" title="Permalink to this headline">¶</a></h3>
<p><strong>mast_strain</strong>: Specify three numbers for multiplying the lattice parameters a, b, and c. Only works with <code class="docutils literal"><span class="pre">mast_run_method</span></code> of <code class="docutils literal"><span class="pre">run_strain</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_strain</span> <span class="mf">1.01</span> <span class="mf">1.03</span> <span class="mf">0.98</span>
</pre></div>
</div>
<p>This example will stretch the lattice along lattice vector a by 1%, stretch the lattice along lattice vector b by 3%, and compress the lattice along lattice vector c by 2%</p>
</div>
<div class="section" id="mast-xxx-method-keywords">
<h3>8.4.2.5. mast_xxx_method keywords<a class="headerlink" href="#mast-xxx-method-keywords" title="Permalink to this headline">¶</a></h3>
<p>The following keywords have individual sections:</p>
<p><strong>mast_write_method</strong>: Specifies what the ingredient should write out before running (e.g., create the INCAR)</p>
<p><strong>mast_ready_method</strong>: Specifies how MAST can tell if the ingredient is ready to run (often, in addition to writing its own files, an ingredient must also wait for data from its parent ingredient(s)).</p>
<p><strong>mast_run_method</strong>: Specifies what MAST should do to run the ingredient (e.g. submit a submission script to a queue, or perform some other action)</p>
<p><strong>mast_complete_method</strong>: Specifies how MAST can tell if the ingredient is considered complete</p>
<p><strong>mast_update_children_method</strong>: Specifies what information an ingredient passes on to its children, and how it does so.</p>
<p>Specific available values for each keyword are given in the accompanying sections, and require no arguments, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_write_method</span> <span class="n">write_singlerun</span>
</pre></div>
</div>
<p>They depend on having an appropriate program set in <code class="docutils literal"><span class="pre">mast_program</span></code>.</p>
<p>However, you may choose to specify arguments where available, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_complete_method</span> <span class="n">file_has_string</span> <span class="n">myoutput</span> <span class="s2">&quot;End of Execution&quot;</span>
</pre></div>
</div>
<p>You may also choose to specify multiple methods. These methods will be performed in the order listed. For <code class="docutils literal"><span class="pre">mast_ready_method</span></code> or <code class="docutils literal"><span class="pre">mast_complete_method</span></code>, all methods listed must return True in order for the ingredient to be considered ready or complete, respectively.
Use a semicolon to separate out the methods:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_complete_method</span> <span class="n">file_has_string</span> <span class="n">myoutput</span> <span class="s2">&quot;End of Execution&quot;</span><span class="p">;</span> <span class="n">file_exists</span> <span class="n">Parsed_Structures</span>
</pre></div>
</div>
<p>In the example above, the file &#8220;myoutput&#8221; must exist and contain the phrase &#8220;End of Execution&#8221;, and the file &#8220;Parsed_Structures&#8221; must exist, in order for the ingredient to be considered complete.</p>
<p>Update-children methods will always get the child name appended as the end of the argument string. For example,</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_update_children_method</span> <span class="n">copy_file</span> <span class="n">EndStructure</span> <span class="n">BeginStructure</span>
</pre></div>
</div>
<p>will copy the file EndStructure of the parent ingredient folder to a new file BeginStructure in the child ingredient folder. There is no separate argument denoting the child ingredient.</p>
<p>All arguments are passed as strings. Arguments in quotation marks are kept together.</p>
<p>Some common open-ended methods are:</p>
<ul>
<li><p class="first"><strong>file_exists &lt;filename&gt;</strong></p>
</li>
<li><p class="first"><strong>file_has_string &lt;filename&gt; &lt;string&gt;</strong></p>
</li>
<li><p class="first"><strong>copy_file &lt;filename&gt; &lt;copy_to_filename&gt;</strong></p>
</li>
<li><p class="first"><strong>softlink_file &lt;filename&gt; &lt;softlink_to_filename&gt;</strong></p>
</li>
<li><p class="first"><strong>copy_fullpath_file &lt;full path file name&gt; &lt;copy_to_filename&gt;</strong>: This method is for copying some system file like //home/user/some_template, not an ingredient-specific file</p>
</li>
<li><p class="first"><strong>write_ingred_input_file &lt;filename&gt; &lt;allowed file&gt; &lt;uppercase keywords&gt; &lt;delimiter&gt;</strong>: The allowed file specifies an allowed keywords file name in <code class="docutils literal"><span class="pre">&lt;MAST</span> <span class="pre">installation</span> <span class="pre">directory&gt;/MAST/ingredients/programkeys</span></code>.</p>
<blockquote>
<div><ul>
<li><p class="first">Use &#8220;all&#8221; to put any non-mast keywords into the input file.</p>
</li>
<li><p class="first">Use 1 to uppercase all keywords, or 0 to leave them as entered.</p>
</li>
<li><p class="first">Leave off the delimiter argument in order to use a single space.</p>
</li>
<li><p class="first">Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">write_ingred_input_file</span> <span class="nb">input</span><span class="o">.</span><span class="n">txt</span> <span class="nb">all</span> <span class="mi">0</span> <span class="o">=</span>
<span class="n">write_ingred_input_file</span> <span class="nb">input</span><span class="o">.</span><span class="n">txt</span> <span class="n">phon_allowed_keys</span><span class="o">.</span><span class="n">py</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>no_setup</strong>: Does nothing. Useful when you want to specifically specify doing nothing.</p>
</li>
<li><p class="first"><strong>no_update</strong>: Does nothing (but, does accept the child name it is given). Useful when you want to specify doing nothing for a child update step.</p>
</li>
<li><p class="first"><strong>run_command: &lt;command string, including all arguments&gt;</strong>: This method allows you to run a python script.</p>
<blockquote>
<div><ul>
<li><p class="first">The python script may take in only string-based arguments</p>
</li>
<li><p class="first">Please stick to common text characters.</p>
</li>
<li><p class="first">Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mast_run_method</span> <span class="n">run_command</span> <span class="s2">&quot;//home/user/myscripts/my_custom_parsing.py 25 0.01&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">In the example above, the numbers 25 and 0.01 will actually be passed into sys.argv as a string.</p>
</li>
<li><p class="first">This method is intended to allow you to run short custom scripts of your own creation, particularly for <code class="docutils literal"><span class="pre">mast_write_method</span></code> when setting up your ingredient.</p>
</li>
<li><dl class="first docutils">
<dt>For long or complex execution steps where you want the output tracked separately, do not use this method. Instead, do the following in order to get your script submitted to the queue:</dt>
<dd><p class="first last">#  Use <code class="docutils literal"><span class="pre">write_submit_script</span></code> in your <code class="docutils literal"><span class="pre">mast_write_method</span></code>, along with any other write methods
#  Use <code class="docutils literal"><span class="pre">mast_run_method</span> <span class="pre">run_singlerun</span></code>
#  Put your script in the <code class="docutils literal"><span class="pre">mast_exec</span></code> keyword</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="mast-write-method-keyword-values">
<h3>8.4.2.6. mast_write_method keyword values<a class="headerlink" href="#mast-write-method-keyword-values" title="Permalink to this headline">¶</a></h3>
<p><strong>write_singlerun</strong></p>
<ul class="simple">
<li>Write files for a single generic run.</li>
<li>Programs supported: vasp</li>
</ul>
<p><strong>write_singlerun_automesh</strong></p>
<ul class="simple">
<li>Write files for a single generic run.</li>
<li>Programs supported: vasp</li>
<li>Requires the <code class="docutils literal"><span class="pre">mast_kpoint_density</span></code> ingredient keyword</li>
</ul>
<p><strong>write_neb</strong></p>
<ul class="simple">
<li>Write an NEB ingredient. This method writes interpolated images to the appropriate folders, creating 00/01/.../0N directories and uses linear interpolation between images.</li>
<li>Programs supported: vasp</li>
</ul>
<p><strong>write_pathfinder_neb</strong></p>
<ul>
<li><p class="first">Write an NEB ingredient using a charge-density-based pathfinding method.</p>
</li>
<li><p class="first">Programs supported: vasp</p>
</li>
<li><p class="first">This method takes the argument of an ingredient name for the ingredient from which to take the charge density.</p>
<blockquote>
<div><ul class="simple">
<li>The ingredient name must be fully specified, e.g. no &lt;S&gt;, &lt;N&gt;, etc. tags.</li>
<li>The ingredient must have a CHGCAR file written. A gamma-point calculation is sufficient for this purpose.</li>
<li>The ingredient should have both endpoints removed. For example, for vacancy migration, the ingredient should have neither a vacancy at the initial position, nor a vacancy at the final position. However, it should have all other non-migrating defects that are common to both the initial and final state.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">This method also takes a second argument as a number of additional sites from the bottom of the sorted POSCAR for which to find the path, if the moving atoms(s) are not interstitials; e.g. a vacancy-mediated moving atom must be sorted to the end, and the second argument would therefore be 1.</p>
</li>
<li><p class="first">This method only works with <code class="docutils literal"><span class="pre">use_structure_index</span> <span class="pre">True</span></code> in the <code class="docutils literal"><span class="pre">$structure</span></code> section of the input file.</p>
</li>
</ul>
<p><strong>write_neb_subfolders</strong></p>
<ul class="simple">
<li>Write static runs for an NEB, starting from a previous NEB, into image subfolders 01 to 0(N-1).</li>
<li>Programs supported: vasp</li>
</ul>
<p><strong>write_phonon_single</strong></p>
<ul class="simple">
<li>Write files for a phonon run.</li>
<li>Programs supported: vasp</li>
</ul>
<p><strong>write_phonon_multiple</strong></p>
<ul class="simple">
<li>Write a phonon run, where the frequency calculation for each atom and each direction is a separate run, using selective dynamics. CHGCAR and WAVECAR must have been given to the ingredient previously; these files will be softlinked into each subfolder.</li>
<li>Programs supported: vasp</li>
</ul>
</div>
<div class="section" id="mast-ready-method-keyword-values">
<h3>8.4.2.7. mast_ready_method keyword values<a class="headerlink" href="#mast-ready-method-keyword-values" title="Permalink to this headline">¶</a></h3>
<p><strong>ready_singlerun</strong></p>
<ul class="simple">
<li>Checks that a single run is ready to run</li>
<li>Programs supported: vasp (either NEB or regular VASP run), phon</li>
</ul>
<p><strong>ready_defect</strong></p>
<ul class="simple">
<li>Checks that the ingredient has a structure file</li>
<li>Programs supported: vasp</li>
</ul>
<p><strong>ready_neb_subfolders</strong></p>
<ul class="simple">
<li>Checks that each 01/.../0(N-1) subfolder is ready to run as its own separate calculation, following the ready_singlerun criteria for each folder</li>
<li>This method is used for NEB static calculations rather than NEB calculations themselves.</li>
</ul>
<p><strong>ready_subfolders</strong>
*  Checks that each subfolder is ready to run, following the ready_singlerun criteria.
*  Generic
*  This method is used for calculations whose write method includes subfolders, and where each subfolder is a calculation, as in <code class="docutils literal"><span class="pre">write_phonon_multiple</span></code>.</p>
</div>
<div class="section" id="mast-run-method-keyword-values">
<h3>8.4.2.8. mast_run_method keyword values<a class="headerlink" href="#mast-run-method-keyword-values" title="Permalink to this headline">¶</a></h3>
<p><strong>run_defect</strong></p>
<ul class="simple">
<li>Create a defect in the structure; not submitted to queue</li>
<li>Generic</li>
<li>Requires the <code class="docutils literal"><span class="pre">$defects</span></code> section in the input file (see <a class="reference internal" href="3_1_5_defects.html"><span class="doc">The Defects section</span></a>).</li>
</ul>
<p><strong>run_singlerun</strong></p>
<ul class="simple">
<li>Submit a run to the queue.</li>
<li>Generic</li>
</ul>
<p><strong>run_neb_subfolders</strong></p>
<ul class="simple">
<li>Run each 01/.../0(N-1) subfolder as run_singlerun</li>
<li>Generic</li>
</ul>
<p><strong>run_subfolders</strong></p>
<ul class="simple">
<li>Run each subfolder as run_singlerun</li>
<li>Generic</li>
</ul>
<p><strong>run_strain</strong></p>
<ul class="simple">
<li>Strain the structure; not submitted to queue</li>
<li>Generic</li>
<li>Requires the <code class="docutils literal"><span class="pre">mast_strain</span></code> ingredient keyword</li>
</ul>
<p><strong>run_scale</strong></p>
<ul class="simple">
<li>Scale the structure (e.g. a 2-atom unit cell scaled by 2 becomes a 16-atom supercell)</li>
<li>Requires the <code class="docutils literal"><span class="pre">$scaling</span></code> subsection in the input file (see <a class="reference internal" href="3_1_1_structure.html"><span class="doc">The Structure section</span></a>).</li>
<li>Must not be run on the starting ingredient.</li>
</ul>
</div>
<div class="section" id="mast-complete-method-keyword-values">
<h3>8.4.2.9. mast_complete_method keyword values<a class="headerlink" href="#mast-complete-method-keyword-values" title="Permalink to this headline">¶</a></h3>
<p><strong>complete_singlerun</strong></p>
<ul>
<li><p class="first">Check if run is complete</p>
</li>
<li><p class="first">Programs supported: vasp</p>
</li>
<li><p class="first">Note that for VASP, the phrase <code class="docutils literal"><span class="pre">reached</span> <span class="pre">required</span> <span class="pre">accuracy</span></code> is checked for, as well as a <code class="docutils literal"><span class="pre">User</span> <span class="pre">time</span></code> in seconds. The exceptions are:</p>
<blockquote>
<div><ul class="simple">
<li>NSW of 0, NSW of -1, or NSW not specified in the ingredients section keywords is taken as a static calculation, and .EDIFF is reached. is checked instead of .reached required accuracy.</li>
<li>IBRION of -1 is taken as a static calculation, and .EDIFF is  reached. is checked instead of .reached required accuracy.</li>
<li>IBRION of 0 is taken as an MD calculation, and only user time is checked</li>
<li>IBRION of 5, 6, 7, or 8 is taken as a phonon calculation, and only user time is checked</li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>complete_neb_subfolders</strong></p>
<ul class="simple">
<li>Check if all NEB subfolders 01/.../0(N-1) are complete, according to complete_singlerun criteria.</li>
<li>This method is not for checking the completion of NEBs! An NEB ingredient should have <code class="docutils literal"><span class="pre">mast_program</span> <span class="pre">vasp_neb</span></code> and <code class="docutils literal"><span class="pre">mast_complete_method</span> <span class="pre">complete_singlerun</span></code>.</li>
<li>An NEB static calculation, or a static calculation for each image, would use this keyword as <code class="docutils literal"><span class="pre">mast_complete_method</span> <span class="pre">complete_neb_subfolders</span></code> but have <code class="docutils literal"><span class="pre">mast_program</span> <span class="pre">vasp</span></code> instead of vasp_neb.</li>
</ul>
<p><strong>complete_subfolders</strong></p>
<ul class="simple">
<li>Check if all subfolders are complete, according to complete_singlerun criteria.</li>
<li>Generic</li>
</ul>
<p><strong>complete_structure</strong></p>
<ul class="simple">
<li>Check if run has an output structure file written</li>
<li>Programs supported: vasp (looks for CONTCAR)</li>
</ul>
</div>
<div class="section" id="mast-update-children-method-keyword-values">
<h3>8.4.2.10. mast_update_children_method keyword values<a class="headerlink" href="#mast-update-children-method-keyword-values" title="Permalink to this headline">¶</a></h3>
<p><strong>give_structure</strong></p>
<ul class="simple">
<li>Forward the relaxed structure</li>
<li>Programs supported: vasp (CONTCAR to POSCAR)</li>
</ul>
<p><strong>give_structure_and_energy_to_neb</strong></p>
<ul class="simple">
<li>Forward the relaxed structure and energy files</li>
<li>Programs supported: vasp (CONTCAR to POSCAR, and copy over OSZICAR)</li>
</ul>
<p><strong>give_neb_structures_to_neb</strong></p>
<ul class="simple">
<li>Give NEB output images structures as the starting point image input structures in another NEB</li>
<li>Programs supported: vasp (01/.../0(N-1) CONTCAR files will be the child NEB ingredient.s starting 01/.../0(N-1) POSCAR files.</li>
</ul>
<p><strong>give_saddle_structure</strong></p>
<ul class="simple">
<li>Forward the highest-energy structure of all subfolder structures</li>
<li>Programs supported: vasp</li>
</ul>
</div>
<div class="section" id="example-ingredients-section">
<h3>8.4.2.11. Example Ingredients section<a class="headerlink" href="#example-ingredients-section" title="Permalink to this headline">¶</a></h3>
<p>Here is an example ingredients section:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ingredients
begin ingredients_global
mast_program    vasp
mast_nodes      1
mast_multiplyencut 1.5
mast_ppn        1
mast_queue      default
mast_exec       mpiexec //home/mayeshiba/bin/vasp.5.3.3_vtst_static
mast_kpoints    2x2x2 M
mast_xc PW91
isif 2
ibrion 2
nsw 191
ismear 1
sigma 0.2
lwave False
lcharg False
prec Accurate
mast_program   vasp
mast_write_method           write_singlerun
mast_ready_method           ready_singlerun
mast_run_method             run_singlerun
mast_complete_method        complete_singlerun
mast_update_children_method  give_structure
end

begin volrelax_to_singlerun
isif 3
end

begin singlerun_to_phonon
ibrion -1
nsw 0
mast_update_children_method  give_structure_and_restart_files
mast_multiplyencut 1.25
lwave True
lcharge True
end

begin inducedefect
mast_write_method           no_setup
mast_ready_method           ready_defect
mast_run_method             run_defect
mast_complete_method        complete_structure
end

begin singlerun_vac1
mast_coordinates            POSCAR_vac1
end

begin singlerun_vac2
mast_coordinates            POSCAR_vac2
end

begin singlerun_to_neb
ibrion -1
nsw 0
mast_update_children_method  give_structure_and_energy_to_neb
lwave True
lcharge True
end

begin neb_to_neb_vac1-vac2
mast_coordinates            POSCAR_nebim1,POSCAR_nebim2,POSCAR_nebim3
mast_write_method           write_neb
mast_update_children_method  give_neb_structures_to_neb
mast_nodes                  3
mast_kpoints                1x1x1 G
ibrion 1
potim 0.5
images 3
lclimb True
spring -5
end

begin neb_to_neb_vac1-vac3
mast_coordinates            POSCAR_nebim1_set2,POSCAR_nebim2_set2,POSCAR_nebim3_set2
mast_write_method           write_neb
mast_update_children_method  give_neb_structures_to_neb
mast_nodes                  3
mast_kpoints                1x1x1 G
ibrion 1
potim 0.5
images 3
lclimb True
spring -5
end

begin neb_to_nebstat
mast_write_method           write_neb
mast_update_children_method  give_neb_structures_to_neb
mast_nodes                  3
ibrion 1
potim 0.5
images 3
lclimb True
spring -5
end

begin nebstat_to_nebphonon
ibrion -1
nsw 0
mast_write_method           write_neb_subfolders
mast_ready_method           ready_neb_subfolders
mast_run_method             run_neb_subfolders
mast_complete_method        complete_neb_subfolders
mast_update_children_method  give_saddle_structure
end

begin phonon_to_phononparse
mast_write_method           write_phonon_multiple
mast_ready_method           ready_subfolders
mast_run_method             run_subfolders
mast_complete_method        complete_subfolders
mast_update_children_method  give_phonon_multiple_forces_and_displacements
ibrion 5
nfree 2
potim 0.01
istart 1
icharg 1
end

$end
</pre></div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54660326-1', 'auto');
  ga('send', 'pageview');

</script></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/MAST_logo_200px.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">8.4. The Ingredients section</a><ul>
<li><a class="reference internal" href="#program-specific-keywords">8.4.1. Program-specific keywords</a></li>
<li><a class="reference internal" href="#special-mast-keywords">8.4.2. Special MAST keywords</a><ul>
<li><a class="reference internal" href="#submission-script-keywords">8.4.2.1. Submission script keywords</a></li>
<li><a class="reference internal" href="#mast-control-flow-keywords">8.4.2.2. MAST control flow keywords</a></li>
<li><a class="reference internal" href="#vasp-specific-keywords">8.4.2.3. VASP-specific keywords</a></li>
<li><a class="reference internal" href="#structure-manipulation-keywords">8.4.2.4. Structure manipulation keywords</a></li>
<li><a class="reference internal" href="#mast-xxx-method-keywords">8.4.2.5. mast_xxx_method keywords</a></li>
<li><a class="reference internal" href="#mast-write-method-keyword-values">8.4.2.6. mast_write_method keyword values</a></li>
<li><a class="reference internal" href="#mast-ready-method-keyword-values">8.4.2.7. mast_ready_method keyword values</a></li>
<li><a class="reference internal" href="#mast-run-method-keyword-values">8.4.2.8. mast_run_method keyword values</a></li>
<li><a class="reference internal" href="#mast-complete-method-keyword-values">8.4.2.9. mast_complete_method keyword values</a></li>
<li><a class="reference internal" href="#mast-update-children-method-keyword-values">8.4.2.10. mast_update_children_method keyword values</a></li>
<li><a class="reference internal" href="#example-ingredients-section">8.4.2.11. Example Ingredients section</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="3_1_9_scaling.html"
                        title="previous chapter">8.3. The Scaling section</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="3_1_3_recipe.html"
                        title="next chapter">8.5. The Recipe section</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="3_1_3_recipe.html" title="8.5. The Recipe section"
             >next</a> |</li>
        <li class="right" >
          <a href="3_1_9_scaling.html" title="8.3. The Scaling section"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MAST 1.3.2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="3_1_inputsections.html" >8. Sections of the Input File</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, University of Wisconsin-Madison Compuational Materials Group.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>