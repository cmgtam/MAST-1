'''
    All files for a session will be stored in a directory and subdirectories of it.
    Ex1)
    experiment1/
        ./job1/
        ./job2/
        ./job3/

    Ex2) <- the simplest way. I implemented this

    experiment2/
        ./job1.pkl
        ./job2.pkl
        ./job3.pkl
    Ex3)
    experiment3/
        ./jid_01.pkl  # I think some jobs might be done  many time in the loop.
        ./jid_02.pkl  # jid maybe different even though job name is same. 
        ./jid_03.pkl  # if number of iteration is big then the intermediate files blow up
'''

import os 
import errono

class FileManager:
    '''FILEMANAGER will load correct pickle files by session id (sid) and job id (jid)'''

    def __init__(self):
        self.dirdict = {}
        pass

    def register(sid,session_dir):
        if makedir(session_dir):
            self.dirdict[sid] = session_dir
        else:
            raise Exception("Failed to make a session directory. \nDetail: %s" % ex.strerror)

    def makedir(path):
        '''MAKEDIR makes a directory (path) or check that the 
            directory exist, then return True.
            If it fails to make a directory, then returns False.
        '''
        try:
            os.makedirs(spath)
            print spath
        except OSError as ex:
            if ex.errno == errno.EEXIST:
                print 'Results will be overwritten in %s' % spath
            else:
                print ex.strerror
                return False
        return True












